"use strict";Object.defineProperty(exports,"__esModule",{value:!0});var C=require("@ceramicnetwork/3id-did-resolver"),D=require("@ceramicnetwork/http-client"),m=require("@ceramicnetwork/stream-caip10-link"),z=require("@glazed/datamodel"),p=require("@glazed/did-datastore"),A=require("@glazed/tile-loader"),I=require("did-resolver"),M=require("key-did-resolver"),R=require("caip");const S={definitions:{cryptoAccounts:"kjzl6cwe1jw149z4rvwzi56mjjukafta30kojzktd9dsrgqdgz4wlnceu59f95f",alsoKnownAs:"kjzl6cwe1jw146zfmqa10a5x1vry6au3t362p44uttz4l0k4hi88o41zplhmxnf",basicProfile:"kjzl6cwe1jw145cjbeko9kil8g9bxszjhyde21ob8epxuxkaon1izyqsu8wgcic"},schemas:{CryptoAccounts:"ceramic://k3y52l7qbv1frypussjburqg4fykyyycfu0p9znc75lv2t5cg4xaslhagkd7h7mkg",AlsoKnownAs:"ceramic://k3y52l7qbv1fryojt8n8cw2k04p9wp67ly59iwqs65dejso566fij5wsdrb871yio",BasicProfile:"ceramic://k3y52l7qbv1frxt706gqfzmq6cbqdkptzk8uudaryhlkf6ly9vx21hqu4r6k1jqio"},tiles:{}};function k(t){try{return R.AccountID.parse(t),!0}catch{return!1}}var y=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},i=(t,e,r)=>(y(t,e,"read from private field"),r?r.call(t):e.get(t)),s=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},c=(t,e,r,a)=>(y(t,e,"write to private field"),a?a.call(t,r):e.set(t,r),r),o,n,d,h,u;const f={local:"http://localhost:7007","mainnet-gateway":"https://gateway.ceramic.network","testnet-clay":"https://ceramic-clay.3boxlabs.com","testnet-clay-gateway":"https://gateway-clay.ceramic.network"};class x{constructor(e){s(this,o,void 0),s(this,n,void 0),s(this,d,void 0),s(this,h,void 0),s(this,u,void 0);const r=new D.CeramicClient(f[e.ceramic]??e.ceramic),a=e.loader??new A.TileLoader({ceramic:r,cache:e.cache});c(this,o,r),c(this,n,new z.DataModel({autopin:!0,loader:a,model:e.model??S})),c(this,d,new p.DIDDataStore({autopin:!0,ceramic:r,loader:a,model:i(this,n)})),c(this,h,new I.Resolver({...M.getResolver(),...C.getResolver(i(this,o))})),c(this,u,a)}get ceramic(){return i(this,o)}get dataModel(){return i(this,n)}get dataStore(){return i(this,d)}get resolver(){return i(this,h)}get tileLoader(){return i(this,u)}async getAccountDID(e){const r=await m.Caip10Link.fromAccount(i(this,o),e);if(r.did==null)throw new Error(`No DID found for ${e}`);return r.did}async toDID(e){return k(e)?await this.getAccountDID(e):e}async get(e,r){const a=await this.toDID(r);return await i(this,d).get(e,a)}}o=new WeakMap,n=new WeakMap,d=new WeakMap,h=new WeakMap,u=new WeakMap;var g=(t,e,r)=>{if(!e.has(t))throw TypeError("Cannot "+r)},w=(t,e,r)=>(g(t,e,"read from private field"),r?r.call(t):e.get(t)),_=(t,e,r)=>{if(e.has(t))throw TypeError("Cannot add the same private member more than once");e instanceof WeakSet?e.add(t):e.set(t,r)},q=(t,e,r,a)=>(g(t,e,"write to private field"),a?a.call(t,r):e.set(t,r),r),v,l;class W{constructor(e){_(this,v,void 0),_(this,l,void 0),q(this,v,e.core),q(this,l,e.id)}get id(){return w(this,l)}async get(e){return await w(this,v).dataStore.get(e,w(this,l))}}v=new WeakMap,l=new WeakMap,Object.defineProperty(exports,"isDIDstring",{enumerable:!0,get:function(){return p.isDIDstring}}),exports.CERAMIC_URLS=f,exports.Core=x,exports.PublicID=W,exports.isCAIP10string=k;
//# sourceMappingURL=lib.cjs.map
